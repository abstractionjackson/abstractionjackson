{{- with resources.Get "js/main.js" }}
{{- $opts := dict
"minify" (not hugo.IsDevelopment)
"sourceMap" (cond hugo.IsDevelopment "external" "")
"targetPath" "js/main.js"
"format" "esm"
}}
{{- with . | js.Build $opts }}
{{- if hugo.IsDevelopment }}
<script type="module" src="{{ .RelPermalink }}"></script>
{{- else }}
{{- with . | fingerprint }}
<script type="module" src="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous"></script>
{{- end }}
{{- end }}
{{- end }}
{{- end }}